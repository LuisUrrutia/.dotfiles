# Hyper key definition (caps lock remapped via Hyperkey app)
# hyper = shift + ctrl + alt + cmd
# meh = ctrl + alt + shift

# Define window management mode for warp/stack operations
# Use anybar to indicate the mode: https://github.com/tonsky/AnyBar
:: yabaimode @ : echo -n "red" | nc -4u -w0 localhost 1738
:: default : echo -n "hollow" | nc -4u -w0 localhost 1738

# Enter window mode with hyper + y (shift + alt + ctrl + y)
hyper - y ; yabaimode
yabaimode < escape ; default
yabaimode < hyper - y ; default

# Window toggle operations
yabaimode < f : yabai -m window --toggle zoom-fullscreen
yabaimode < 0x32 : yabai -m space --balance  # 0x32 = backtick/grave key (`)

# Move operations - shift + hjkl for moving
yabaimode < shift - h : yabai -m window --move rel:-80:0
yabaimode < shift - j : yabai -m window --move rel:0:80
yabaimode < shift - k : yabai -m window --move rel:0:-80
yabaimode < shift - l : yabai -m window --move rel:80:0

# Resize submode
yabaimode < r ; yabairesize
:: yabairesize @ : echo -n "orange" | nc -4u -w0 localhost 1738
yabairesize < h : yabai -m window --resize left:-20:0
yabairesize < j : yabai -m window --resize bottom:0:20
yabairesize < k : yabai -m window --resize top:0:-20
yabairesize < l : yabai -m window --resize right:20:0
yabairesize < escape ; yabaimode

# Application launchers
hyper - 0x32 : open -a Ghostty  # 0x32 = backtick/grave key (`)
f13 : open -a Slack
f15 : open -a "Brave Browser"
f16 : open -a WhatsApp
f17 : open -a Zed
f18 : open -a Ghostty; osascript -e 'tell application "Ghostty" to activate'

# Named space focus
alt - t : yabai -m space --focus terminal
alt - c : yabai -m space --focus code
alt - b : yabai -m space --focus web
alt - w : yabai -m space --focus work
alt - o : yabai -m space --focus other
alt - s : yabai -m space --focus social

# Move space to display
hyper - q : yabai -m space --display 1
hyper - w : yabai -m space --display 2

# Quick space focus
hyper - 1 : yabai -m space --focus terminal
hyper - 2 : yabai -m space --focus code
hyper - 3 : yabai -m space --focus web
hyper - 4 : yabai -m space --focus work

# Send window to space (meh = ctrl + alt + shift)
ctrl + alt + shift - 1 : yabai -m window --space terminal
ctrl + alt + shift - 2 : yabai -m window --space code
ctrl + alt + shift - 3 : yabai -m window --space web
ctrl + alt + shift - 4 : yabai -m window --space work

# Toggle recent space
hyper - tab : yabai -m space --focus recent

# Float controls
hyper - f : yabai -m window --toggle float
hyper - c : yabai -m window --toggle float; yabai -m window --grid 6:6:1:1:4:4

# Change window focus
alt - j : yabai -m window --focus stack.next || yabai -m window --focus next || yabai -m window --focus first
alt - k : yabai -m window --focus stack.prev || yabai -m window --focus prev || yabai -m window --focus last
alt - h : yabai -m window --focus west || yabai -m display --focus west
alt - l : yabai -m window --focus east || yabai -m display --focus east

# Stack window navigation (left-hand)
hyper - a : yabai -m window --focus stack.prev || yabai -m window --focus prev || yabai -m window --focus last
hyper - s : yabai -m window --focus stack.next || yabai -m window --focus next || yabai -m window --focus first

# Window swapping (meh = ctrl + alt + shift)
ctrl + alt + shift - j : yabai -m window --swap south || yabai -m window --swap next
ctrl + alt + shift - k : yabai -m window --swap north || yabai -m window --swap prev
