# Theme
include current-theme.conf

# Shell Configuration
shell /opt/homebrew/bin/fish --interactive
shell_integration enabled

# Font Configuration
font_family MonaspiceAr Nerd Font Mono Regular
bold_font MonaspiceAr Nerd Font Mono ExtraBold
italic_font MonaspiceAr Nerd Font Mono Italic
bold_italic_font MonaspiceAr Nerd Font Mono ExtraBold Italic
font_size 12.0
disable_ligatures cursor
macos_thicken_font 0.25

# Window Appearance
window_padding_width 5 10 5 10
draw_minimal_borders yes
# hide_window_decorations yes
# background_opacity 0.9
# background_blur 30
remember_window_size yes
macos_show_window_title_in window
macos_titlebar_color background
macos_custom_beam_cursor yes
macos_option_as_alt yes

# Terminal Behavior
scrollback_lines 20000
cursor_stop_blinking_after 15.0
mouse_hide_wait 3.0
strip_trailing_spaces smart
select_by_word_characters @-./_~?&=%+#

# URL Handling
url_style curly
detect_urls yes
open_url_with default
url_prefixes http https file ftp
show_hyperlink_targets yes
allow_hyperlinks yes

# Bell Settings
enable_audio_bell no
window_alert_on_bell no
visual_bell_duration 0.0
visual_bell_color none
bell_on_tab " "

# Tab Bar Configuration
tab_bar_edge bottom
tab_bar_style custom
# tab_separator "  "
tab_bar_min_tabs 1
tab_bar_margin_width 0.0
tab_bar_margin_height 8.0 0.0
tab_activity_symbol " "
tab_title_template " {fmt.fg.tab}{' ' if layout_name == 'stack' and num_windows > 1 else ''}{bell_symbol}{activity_symbol}{index} {title} "
active_tab_font_style bold
# tab_title_template          {title}{' :{}:'.format(num_windows) if num_windows > 1 else ''}
# tab_title_template "{index}:{fmt.bold}{title.split('/')[-1]}"
# tab_title_template          {title}{' :{}:'.format(num_windows) if num_windows > 1 else ''}
# tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab} {index}: {'/'.join(title.split('/')[-2:])}"
# tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{index}:{title}"

# Keyboard Shortcuts

## Config Management
map cmd+ctrl+, load_config_file
map cmd+ctrl+r load_config_file
map cmd+alt+, debug_config
map cmd+shift+, show_kitty_env_vars

## Window Management
map cmd+enter new_window_with_cwd
map cmd+shift+enter new_os_window_with_cwd
map cmd+n new_os_window
map cmd+shift+n new_window

## Tab Management
map cmd+shift+right next_tab
map cmd+shift+left previous_tab
map cmd+shift+t new_tab_with_cwd
map cmd+shift+. move_tab_forward
map cmd+shift+, move_tab_backward

## Font Size Control
map cmd+plus change_font_size all +1.0
map cmd+minus change_font_size all -1.0
map cmd+0 change_font_size all 0

## Scrollback
map cmd+shift+h show_scrollback
map cmd+shift+g show_last_command_output

## Clipboard Operations
map cmd+shift+v paste_from_selection
map cmd+shift+s paste_from_buffer a

## Hints - Quick Actions
map cmd+shift+e open_url_with_hints
map cmd+shift+y kitten hints --type hyperlink

## Marks (for marking and jumping to positions)
map cmd+shift+m create_marker
map cmd+shift+up scroll_to_mark prev
map cmd+shift+down scroll_to_mark next

## Clear Terminal
map cmd+k clear_terminal to_cursor active
map cmd+shift+k clear_terminal reset active